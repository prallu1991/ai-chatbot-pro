<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P.R.A.I ‚Äì Intelligent Assistant</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #0f0f0f; color: white; height: 100vh; overflow: hidden; }
        
        .app { display: flex; height: 100vh; }
        
        /* Sidebar */
        .sidebar { width: 260px; background: #161616; border-right: 1px solid #2a2a2a; padding: 20px; display: flex; flex-direction: column; }
        .logo { display: flex; align-items: center; gap: 12px; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid #2a2a2a; }
        .logo-icon { width: 36px; height: 36px; background: #3b82f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; color: white; }
        .logo-text { font-size: 18px; font-weight: 700; color: #3b82f6; }
        .new-chat-btn { width: 100%; padding: 12px; background: #3b82f6; border: none; border-radius: 8px; color: white; font-size: 14px; font-weight: 600; cursor: pointer; margin-bottom: 20px; }
        .new-chat-btn:hover { opacity: 0.9; }
        .history-section { flex: 1; }
        .history-title { font-size: 12px; color: #8a8a8a; margin-bottom: 10px; }
        .history-list { display: flex; flex-direction: column; gap: 5px; }
        .history-item { padding: 10px; border-radius: 6px; cursor: pointer; color: #d4d4d4; }
        .history-item:hover { background: #2a2a2a; }
        .history-item.active { background: #2a2a2a; color: white; }
        .clear-all-btn { width: 100%; padding: 10px; background: transparent; border: 1px solid #2a2a2a; border-radius: 8px; color: #8a8a8a; margin-top: 10px; cursor: pointer; }
        .clear-all-btn:hover { background: #2a2a2a; color: #ff6b6b; }
        
        /* Main Chat */
        .chat-area { flex: 1; display: flex; flex-direction: column; }
        .chat-header { padding: 20px; border-bottom: 1px solid #2a2a2a; background: #161616; display: flex; justify-content: space-between; align-items: center; }
        .chat-title { font-size: 16px; font-weight: 600; }
        .header-btn { background: transparent; border: 1px solid #2a2a2a; color: #8a8a8a; width: 36px; height: 36px; border-radius: 6px; cursor: pointer; }
        .header-btn:hover { background: #2a2a2a; color: white; }
        .messages-container { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 20px; }
        .message { max-width: 80%; animation: fadeIn 0.3s ease; }
        .user-message { align-self: flex-end; }
        .bot-message { align-self: flex-start; }
        .message-content { padding: 16px 20px; border-radius: 12px; line-height: 1.6; }
        .user-message .message-content { background: #3b82f6; color: white; }
        .bot-message .message-content { background: #2a2a2a; color: #f0f0f0; }
        .message-sender { font-size: 12px; color: #8a8a8a; margin-bottom: 5px; }
        
        /* Input Area */
        .input-area { padding: 20px; border-top: 1px solid #2a2a2a; background: #161616; }
        .input-container { display: flex; gap: 10px; }
        #message-input { flex: 1; padding: 12px 16px; background: #2a2a2a; border: 1px solid #3a3a3a; border-radius: 8px; color: white; font-size: 15px; resize: none; min-height: 50px; }
        #message-input:focus { outline: none; border-color: #3b82f6; }
        #send-btn { background: #3b82f6; border: none; color: white; width: 50px; height: 50px; border-radius: 8px; cursor: pointer; font-size: 18px; }
        #send-btn:hover:not(:disabled) { opacity: 0.9; }
        #send-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .quick-actions { display: flex; gap: 10px; margin-top: 10px; }
        .quick-action { padding: 8px 12px; background: #2a2a2a; border: 1px solid #3a3a3a; border-radius: 8px; color: #8a8a8a; cursor: pointer; font-size: 13px; }
        .quick-action:hover { background: #3a3a3a; color: white; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .hidden { display: none !important; }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #4a4a4a; border-radius: 3px; }
    </style>
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-icon">P</div>
                <div class="logo-text">P.R.A.I</div>
            </div>
            <button class="new-chat-btn" id="new-chat-btn">+ New Chat</button>
            <div class="history-section">
                <div class="history-title">Recent Chats</div>
                <div class="history-list" id="history-list"></div>
                <button class="clear-all-btn" id="clear-all-btn">Clear All History</button>
            </div>
        </aside>

        <!-- Main Chat -->
        <main class="chat-area">
            <div class="chat-header">
                <div class="chat-title">P.R.A.I Assistant</div>
                <div>
                    <button class="header-btn" id="clear-btn">üóëÔ∏è</button>
                    <button class="header-btn" id="export-btn">üì•</button>
                </div>
            </div>
            <div class="messages-container" id="messages-container"></div>
            <div class="input-area">
                <div class="input-container">
                    <textarea id="message-input" placeholder="Type your message here..." rows="2"></textarea>
                    <button id="send-btn">‚Üí</button>
                </div>
                <div class="quick-actions">
                    <button class="quick-action" id="suggest-btn">üí° Suggestions</button>
                    <button class="quick-action" id="help-btn">‚ùì Help</button>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Simple state management
        let currentChatId = 'default';
        let chats = {
            'default': {
                id: 'default',
                title: 'Welcome Chat',
                messages: [],
                timestamp: Date.now()
            }
        };

        // DOM elements
        const messagesContainer = document.getElementById('messages-container');
        const messageInput = document.getElementById('message-input');
        const sendBtn = document.getElementById('send-btn');
        const historyList = document.getElementById('history-list');
        
        // Initialize
        function init() {
            console.log('Initializing...');
            loadFromStorage();
            renderHistory();
            renderMessages();
            setupEventListeners();
            messageInput.focus();
        }

        // Load from localStorage
        function loadFromStorage() {
            const saved = localStorage.getItem('praiChats');
            if (saved) {
                chats = JSON.parse(saved);
            }
        }

        // Save to localStorage
        function saveToStorage() {
            localStorage.setItem('praiChats', JSON.stringify(chats));
        }

        // Render chat history
        function renderHistory() {
            historyList.innerHTML = '';
            Object.keys(chats).forEach(chatId => {
                const chat = chats[chatId];
                const div = document.createElement('div');
                div.className = `history-item ${chatId === currentChatId ? 'active' : ''}`;
                div.textContent = chat.title;
                div.onclick = () => {
                    currentChatId = chatId;
                    renderHistory();
                    renderMessages();
                };
                historyList.appendChild(div);
            });
        }

        // Render messages
        function renderMessages() {
            messagesContainer.innerHTML = '';
            const chat = chats[currentChatId];
            if (!chat || chat.messages.length === 0) {
                addMessage('Hello! I am P.R.A.I, your intelligent assistant. How can I help you today?', false);
                return;
            }
            chat.messages.forEach(msg => {
                addMessage(msg.content, msg.isUser, false);
            });
        }

        // Add message to UI
        function addMessage(content, isUser, save = true) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            const senderSpan = document.createElement('div');
            senderSpan.className = 'message-sender';
            senderSpan.textContent = isUser ? 'You' : 'P.R.A.I';
            
            contentDiv.appendChild(senderSpan);
            contentDiv.innerHTML += content;
            messageDiv.appendChild(contentDiv);
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            if (save) {
                if (!chats[currentChatId]) {
                    chats[currentChatId] = {
                        id: currentChatId,
                        title: content.substring(0, 30) + '...',
                        messages: [],
                        timestamp: Date.now()
                    };
                }
                chats[currentChatId].messages.push({
                    content,
                    isUser,
                    timestamp: new Date().toLocaleTimeString()
                });
                chats[currentChatId].timestamp = Date.now();
                saveToStorage();
                renderHistory();
            }
        }

        // Send message function
        async function sendMessage() {
            const content = messageInput.value.trim();
            if (!content) return;
            
            console.log('Sending message:', content);
            
            // Add user message
            addMessage(content, true);
            messageInput.value = '';
            sendBtn.disabled = true;
            
            // Show typing indicator
            const typingDiv = document.createElement('div');
            typingDiv.className = 'bot-message message';
            typingDiv.innerHTML = '<div class="message-content">P.R.A.I is thinking...</div>';
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Simulate AI response
            setTimeout(() => {
                typingDiv.remove();
                
                const responses = [
                    `I understand you're asking about "${content}". As P.R.A.I, I'm here to help you with that.`,
                    `Thanks for your message! Regarding "${content}", I can assist you with information and guidance.`,
                    `Great question about "${content}". Let me provide you with the best possible answer.`,
                    `I've received your query about "${content}". Here's what I can tell you based on my knowledge.`
                ];
                
                const response = responses[Math.floor(Math.random() * responses.length)];
                addMessage(response, false);
                
                sendBtn.disabled = false;
                messageInput.focus();
            }, 1500);
        }

        // Setup event listeners
        function setupEventListeners() {
            console.log('Setting up event listeners...');
            
            // Send button
            sendBtn.onclick = sendMessage;
            
            // Enter key to send
            messageInput.onkeydown = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            };
            
            // Auto-resize textarea
            messageInput.oninput = () => {
                messageInput.style.height = 'auto';
                messageInput.style.height = Math.min(messageInput.scrollHeight, 150) + 'px';
                sendBtn.disabled = messageInput.value.trim() === '';
            };
            
            // New chat button
            document.getElementById('new-chat-btn').onclick = () => {
                currentChatId = 'chat-' + Date.now();
                chats[currentChatId] = {
                    id: currentChatId,
                    title: 'New Chat',
                    messages: [],
                    timestamp: Date.now()
                };
                renderHistory();
                renderMessages();
            };
            
            // Clear current chat
            document.getElementById('clear-btn').onclick = () => {
                if (confirm('Clear this chat?')) {
                    if (chats[currentChatId]) {
                        chats[currentChatId].messages = [];
                    }
                    renderMessages();
                    saveToStorage();
                }
            };
            
            // Export chat
            document.getElementById('export-btn').onclick = () => {
                const chat = chats[currentChatId];
                if (!chat || chat.messages.length === 0) {
                    alert('No messages to export.');
                    return;
                }
                
                let text = `P.R.A.I Chat Export\nDate: ${new Date().toLocaleString()}\n\n`;
                chat.messages.forEach(msg => {
                    text += `${msg.isUser ? 'You' : 'P.R.A.I'}: ${msg.content}\n\n`;
                });
                
                const blob = new Blob([text], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `prai-chat-${currentChatId}.txt`;
                a.click();
                URL.revokeObjectURL(url);
            };
            
            // Clear all history
            document.getElementById('clear-all-btn').onclick = () => {
                if (confirm('Clear ALL chat history?')) {
                    chats = { 'default': { id: 'default', title: 'Welcome Chat', messages: [], timestamp: Date.now() } };
                    currentChatId = 'default';
                    saveToStorage();
                    renderHistory();
                    renderMessages();
                }
            };
            
            // Quick action buttons
            document.getElementById('suggest-btn').onclick = () => {
                const suggestions = [
                    "Explain quantum computing in simple terms",
                    "Help me write a business plan",
                    "What are the benefits of regular exercise?",
                    "How to improve my coding skills?"
                ];
                messageInput.value = suggestions[Math.floor(Math.random() * suggestions.length)];
                messageInput.focus();
            };
            
            document.getElementById('help-btn').onclick = () => {
                addMessage("üí° **Help Tips:**\n‚Ä¢ Type your question and press Enter or click ‚Üí\n‚Ä¢ Start a new chat with 'New Chat' button\n‚Ä¢ Export conversations with üì• button\n‚Ä¢ Clear individual chats with üóëÔ∏è button\n‚Ä¢ I'm here to help with any questions!", false);
            };
            
            console.log('Event listeners setup complete');
        }

        // Start the app
        window.onload = init;
    </script>
</body>
</html>
